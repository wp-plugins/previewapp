function addEvent(e,t,n){if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else e.addEventListener(t,n,false)}function removeEvent(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,e[t+n]);e[t+n]=null}else e.removeEventListener(t,n,false)}window.Fidesio=window.Fidesio||{};window.Fidesio.rpc=window.Fidesio.rpc||{};window.Fidesio.rpc.Server=function(){var e=function(){this.listeners={};this.source=null;this.origin=null};e.prototype.on=function(e,t){this.listeners[e]=t};e.prototype.postMessage=function(e){if(this.source===null){throw"Source is not defined"}this.source.postMessage(e,this.origin)};e.prototype.postTransactionResponse=function(e,t,n){this.postMessage({action:t,transaction_id:e,url:window.location.href,result:n})};e.prototype.listen=function(e){var t=this;addEvent(e,"message",function(e){if(e.origin!==e.data.urlsrc){return}t.source=e.source;t.origin=e.origin;var n=e.data.action;if(!t.listeners.hasOwnProperty(n)){console.error("Missing action `"+n+"`.");return}var r=t.listeners[n].apply(t,e.data.parameters);t.postTransactionResponse(e.data.transaction_id,n,r)})};return e}();var server=new Fidesio.rpc.Server;addEvent(window,"load",function(){function l(){s=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);i=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth);o=document.createElement("div");o.style.background="transparent";o.style.height=parseInt(s)+"px";o.style.width=parseInt(i)+"px";o.style.zIndex=99999;o.style.top=0;o.style.left=0;o.style.position="fixed";o.style.display="block";u=document.createElement("style");u.type="text/css";u.innerHTML="* { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }";document.body.appendChild(u);document.body.appendChild(o);o.onclick=function(i){e=i.x==undefined?i.clientX-o.offsetLeft:i.x;n=i.y==undefined?i.clientY-o.offsetTop:i.y;server.postMessage({action:"inspector-prepare-issue-creation",result:{x:e,y:n,scroll_x:t,scroll_y:r}})};window.onmousemove=function(e){server.postMessage({action:"inspector-mouse-move",result:{x:e.x==undefined?e.clientX-o.offsetLeft:e.x,y:e.y==undefined?e.clientY-o.offsetTop:e.y}})}}function c(){var e=document.createElement("div");e.style.visibility="hidden";e.style.width="100px";document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%";e.appendChild(n);var r=n.offsetWidth;e.parentNode.removeChild(e);return t-r}function h(){o.style.display="none";var u=document.querySelector("head base"),f,l;if(u===false||u===null){u=document.createElement("BASE");u.setAttribute("href",window.location.href);f=document.querySelector("head");f.insertBefore(u,f.firstChild)}l=document.body.clientWidth;if(document.body.clientHeight>screen.height){l+=c();e+=Math.floor(c()/2)}if(document.getElementById("inspector-issue-circle")!==null){document.body.removeChild(document.getElementById("inspector-issue-circle"))}a=document.createElement("div"),a.className="issue_circle";a.id="inspector-issue-circle";document.body.appendChild(a);var h=p();a.style.top=parseInt(h.y)+parseInt(n)-25/2+"px";a.style.left=parseInt(h.x)+parseInt(e)-25/2+"px";a.style.width="25px";a.style.height="25px";a.style.borderRadius="75px";a.style.zIndex="2";a.style.border="1px solid #fff";a.style.backgroundColor="#24aee8";a.style.position="absolute";return{width:i,height:s,x:e+t,y:n+r,url:window.location.href,window_width:screen.width,window_height:screen.height,crop_y:document.body.scrollTop,crop_x:document.body.scrollLeft,scroll_y:document.body.scrollTop,scroll_x:document.body.scrollLeft,scroll_width:c(),html:encodeURIComponent(document.documentElement.outerHTML)}}function p(){var e=0,t=0;if(typeof window.pageYOffset=="number"){e=window.pageXOffset;t=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){e=document.body.scrollLeft;t=document.body.scrollTop}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){e=document.documentElement.scrollLeft;t=document.documentElement.scrollTop}return{x:e,y:t}}var e=0,t=0,n=0,r=0,i,s,o,u,a,f=null;server.on("inspector-mode-bug-on",function(){l()});server.on("inspector-mode-bug-off",function(){document.body.removeChild(o);window.onmousemove=function(){}});server.on("inspector-iframe-info",function(){var e=p();s=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);i=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth);return{scroll_x:e.x,scroll_y:e.y,width:i,height:s,title:document.title,url:window.location.href}});server.on("inspector-prepare-screenshot",function(){return h()});server.on("inspector-end-screenshot",function(){o.style.display="block";if(document.getElementById("inspector-issue-circle")!==null){document.body.removeChild(document.getElementById("inspector-issue-circle"))}});window.onscroll=function(){if(server.source===null)return;var e,n,i=p();n=i.y;if(f==null||n>f){e="down"}else{e="top"}t=i.x;r=i.y;server.postMessage({action:"preview-scroll-event",result:{x:t,y:r,direction:e,last_scroll:f}});f=n};server.listen(window)});addEvent(window,"unload",function(){server.postMessage({action:"inspector-change-page",result:{url:window.location.href}})})