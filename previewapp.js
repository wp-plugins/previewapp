(function(){function e(e,t,n){if(e.attachEvent){e["e"+t+n]=n;e[t+n]=function(){e["e"+t+n](window.event)};e.attachEvent("on"+t,e[t+n])}else e.addEventListener(t,n,false)}function t(e,t,n){if(e.detachEvent){e.detachEvent("on"+t,e[t+n]);e[t+n]=null}else e.removeEventListener(t,n,false)}var n=n||{};n.rpc=n.rpc||{};n.rpc.Server=function(){var t=function(){this.listeners={};this.source=null;this.origin=null};t.prototype.on=function(e,t){this.listeners[e]=t};t.prototype.postMessage=function(e){if(this.source===null){throw"Source is not defined"}this.source.postMessage(e,this.origin)};t.prototype.postTransactionResponse=function(e,t,n){this.postMessage({action:t,transaction_id:e,url:window.location.href,result:n})};t.prototype.listen=function(t){var n=this;e(t,"message",function(e){if(e.origin!==e.data.urlsrc){return}n.source=e.source;n.origin=e.origin;var t=e.data.action;if(!n.listeners.hasOwnProperty(t)){console.error("Missing action `"+t+"`.");return}var r=n.listeners[t].apply(n,e.data.parameters);n.postTransactionResponse(e.data.transaction_id,t,r)})};return t}();var r=new n.rpc.Server;e(window,"load",function(){function c(){o=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);s=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth);u=document.createElement("div");u.style.background="transparent";u.style.height=parseInt(o)+"px";u.style.width=parseInt(s)+"px";u.style.zIndex=99999;u.style.top=0;u.style.left=0;u.style.position="fixed";u.style.display="block";u.style.cursor="crosshair";a=document.createElement("style");a.type="text/css";a.innerHTML="* { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }";document.body.appendChild(a);document.body.appendChild(u);u.onclick=function(s){e=s.x==undefined?s.clientX-u.offsetLeft:s.x;n=s.y==undefined?s.clientY-u.offsetTop:s.y;r.postMessage({action:"inspector-prepare-issue-creation",result:{x:e,y:n,scroll_x:t,scroll_y:i}})};window.onmousemove=function(e){r.postMessage({action:"inspector-mouse-move",result:{x:e.x==undefined?e.clientX-u.offsetLeft:e.x,y:e.y==undefined?e.clientY-u.offsetTop:e.y}})}}function h(){var e=document.createElement("div");e.style.visibility="hidden";e.style.width="100px";document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%";e.appendChild(n);var r=n.offsetWidth;e.parentNode.removeChild(e);return t-r}function p(){u.style.display="none";var r=document.querySelector("head base"),a,l;if(r===false||r===null){r=document.createElement("BASE");r.setAttribute("href",window.location.href);a=document.querySelector("head");a.insertBefore(r,a.firstChild)}l=document.body.clientWidth;if(document.body.clientHeight>screen.height){l+=h();e+=Math.floor(h()/2)}if(document.getElementById("inspector-issue-circle")!==null){document.body.removeChild(document.getElementById("inspector-issue-circle"))}f=document.createElement("div"),f.className="issue-circle";f.id="inspector-issue-circle";document.body.appendChild(f);var c=d();f.style.top=parseInt(c.y)+parseInt(n)-25/2+"px";f.style.left=parseInt(c.x)+parseInt(e)-25/2+"px";f.style.width="25px";f.style.height="25px";f.style.borderRadius="75px";f.style.zIndex="2";f.style.border="1px solid #fff";f.style.backgroundColor="#5693c9";f.style.position="absolute";return{width:s,height:o,x:e+t,y:n+i,url:window.location.href,window_width:screen.width,window_height:screen.height,crop_y:document.body.scrollTop,crop_x:document.body.scrollLeft,scroll_y:document.body.scrollTop,scroll_x:document.body.scrollLeft,scroll_width:h(),html:encodeURIComponent(document.documentElement.outerHTML)}}function d(){var e=0,t=0;if(typeof window.pageYOffset=="number"){e=window.pageXOffset;t=window.pageYOffset}else if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){e=document.body.scrollLeft;t=document.body.scrollTop}else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){e=document.documentElement.scrollLeft;t=document.documentElement.scrollTop}return{x:e,y:t}}var e=0,t=0,n=0,i=0,s,o,u,a,f,l=null;r.on("inspector-mode-bug-on",function(){c()});r.on("inspector-mode-bug-off",function(){if(u&&!u.parentNode){document.body.removeChild(u)}window.onmousemove=function(){}});r.on("inspector-iframe-info",function(){var e=d();o=Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight);s=Math.max(document.documentElement.clientWidth,document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth);return{scroll_x:e.x,scroll_y:e.y,width:s,height:o,title:document.title,url:window.location.href}});r.on("inspector-prepare-screenshot",function(){return p()});r.on("inspector-end-screenshot",function(){u.style.display="block";if(document.getElementById("inspector-issue-circle")!==null){document.body.removeChild(document.getElementById("inspector-issue-circle"))}});window.onscroll=function(){if(r.source===null)return;var e,n,s=d();n=s.y;if(l==null||n>l){e="down"}else{e="top"}t=s.x;i=s.y;r.postMessage({action:"preview-scroll-event",result:{x:t,y:i,direction:e,last_scroll:l}});l=n};r.listen(window)});e(window,"unload",function(){r.postMessage({action:"inspector-change-page",result:{url:window.location.href}})})})()